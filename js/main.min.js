$(document).ready(function(){function e(){$(".modal-wrapper").removeClass("active-modal").fadeOut(),$("body").removeClass("no-scroll"),$(this).has("#modal-v")&&$("#modal-v").find("iframe").remove()}function s(e){e.preventDefault();let s=$(this).attr("href"),l=$(s).offset().top;l-=o,$("html, body").stop().animate({scrollTop:l},1e3)}function l(s){$(s).submit(function(e){e.preventDefault()});let l=$(s).children("input[name=name]").val();$(s).trigger("reset"),$("#success-error .modal-content").html("<p><strong>"+l+'</strong>, заявка успешно отправлена </p><img src="./images/success.png" alt="success">'),$("#success-error").fadeIn().toggleClass("active-modal"),setTimeout(e,1500)}let a=$("nav ul li a"),o=$("nav").outerHeight(),t=$(".reviews-slider"),i=$(".reviews-links .link"),r=$(".partners-slider"),n=$(".tariffs-changes .link"),c=$(".tariffs-block"),d=$(".tariffs-all"),m="active",p=$("[data-toggle=modal]");t.slick({slidesToShow:3,slidesToScroll:1,autoplay:!0,autoplaySpeed:4e3,pauseOnHover:!0,arrows:!0,prevArrow:'<a href="#" class="arrow arrow-prev"></a>',nextArrow:'<a href="#" class="arrow arrow-next"></a>',responsive:[{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}),r.slick({slidesToShow:4,slidesToScroll:1,infinite:!0,autoplay:!0,autoplaySpeed:4e3,pauseOnHover:!0,prevArrow:'<a href="#" class="arrow arrow-prev"></a>',nextArrow:'<a href="#" class="arrow arrow-next"></a>',responsive:[{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}),i.on("click",function(e){e.preventDefault();const s=$(this).attr("data-target");t.slick("slickUnfilter"),i.removeClass(m),$(this).addClass(m),"communal_services"===s?t.slick("slickFilter",".communal_services"):"family"===s?t.slick("slickFilter",".family"):"realty"===s?t.slick("slickFilter",".realty"):"business"===s?t.slick("slickFilter",".business"):"health"===s?t.slick("slickFilter",".health"):"all"===s&&t.slick("slickUnfilter")}),$(".pick").on("click",function(){$(".reviews-links").slideToggle()}),n.on("click",function(){n.removeClass(m),$(this).addClass(m),$(this).hasClass("tariffs-compare-rates")?c.addClass("compare"):c.removeClass("compare")}),$(window).resize(function(){$(window).width()<798&&(c.removeClass("compare"),n.removeClass(m),d.addClass(m))}),$.getJSON("./services.json",function(e){let s=[],l=null;$.each(e,function(e,a){l++,s.push('<div class="modal-wrapper" id="tab-'+l+'"><div class="modal-body"><div class="modal-close" data-close="close">&times;</div><h3 class="h3 modal-title">'+e+'</h3><img src="'+a.img+'" alt=""><p>'+a.description+"</p><p>"+a.text+"</p><p><strong>"+a.user+"</strong></p><p>"+a.conclusion+"</p></div></div>")}),$("body").append(s)}),p.on("click",function(e){e.preventDefault();let s=$(this).data("modal"),l=$(this).data("video"),a=$(this).data("text"),o=$(this).data("card");$(s).fadeIn().addClass("active-modal"),$("body").addClass("no-scroll"),"#modal-v"===s&&($(s).find(".modal-video").html(l),$(s).find(".modal-card").html('<img src="'+o+'"><p>'+a+"</p>"))}),$(document).on("click",".modal-close",function(){e()}),$(document).on("mouseup",".modal-wrapper",function(s){$(".modal-body").is(s.target)||0!==$(".modal-body").has(s.target).length||e()}),$(a).on("click",s),$(".scroll").on("click",s),$(window).scroll(function(){let e=$(this).scrollTop();$(a).removeClass("active-link"),a.each(function(s,l){let t=$(l).attr("href"),i=$(t).offset().top-o-10,r=$(t).outerHeight();e>i&&e<i+r&&($(a).removeClass("active-link"),$(this).addClass("active-link"))})}),$("form").each(function(){$(this).validate({rules:{name:{required:!0,minlength:2},phone:{required:!0,minlength:10,maxlength:13},message:{maxlength:300}},messages:{name:{required:"Введите имя.",minlength:"Пожалуйста, введите не менее 2 символов."},phone:{required:"Введите номер телефона.",minlength:"Пожалуйста, введите не менее 10 символов.",maxlength:"Пожалуйста, введите не более 13 символов."},message:{maxlength:"Длинна сообщения больше 300 символовю"}},submitHandler:function(e){l(e)}})})});